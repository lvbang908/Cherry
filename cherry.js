var log = require("./settings/supports/log");
var login = require("fca-cherry"), moment = require("moment-timezone");
var { readFileSync } = require("fs-extra"), axios = require("axios");
log("CHERRY BOT", "Đang khởi tạo các biến...");

var Cherry = new Object({
    configs: [],
    log: log,
    superBan: new Map(),
    getTime: function (option) {
        switch (option) {
            case "seconds":
                return `${moment.tz("Asia/Ho_Chi_minh").format("ss")}`;
            case "minutes":
                return `${moment.tz("Asia/Ho_Chi_minh").format("mm")}`;
            case "hours":
                return `${moment.tz("Asia/Ho_Chi_minh").format("HH")}`;
            case "date": 
                return `${moment.tz("Asia/Ho_Chi_minh").format("DD")}`;
            case "month":
                return `${moment.tz("Asia/Ho_Chi_minh").format("MM")}`;
            case "year":
                return `${moment.tz("Asia/Ho_Chi_minh").format("YYYY")}`;
            case "fullHour":
                return `${moment.tz("Asia/Ho_Chi_minh").format("HH:mm:ss")}`;
            case "fullYear":
                return `${moment.tz("Asia/Ho_Chi_minh").format("DD/MM/YYYY")}`;
            case "fullTime":
                return `${moment.tz("Asia/Ho_Chi_minh").format("HH:mm:ss DD/MM/YYYY")}`;
        }
    },
    host: []
});

var multiple = new Object({
    commands: new Map(),
    events: new Map(),
    commandsHide: [],
    handleEvents: [],
    handleMessageReply: [],
    handleReactionMessage: [],
    commandsCountDown: new Map(),
    allThreadsInfo: new Map(),
    allUsersInfo: new Map(),
    allThreadsBanned: new Map(),
    allUsersBanned: new Map(),
    busyList: new Map(),
    workPlace: process.cwd(),
    timeStart: {
        timeStamp: Date.now(),
        fullTime: ""
    },
    sellList: new Map(),
    startNoti: true
});

log("CHERRY BOT", "Đang kiểm tra thông tin và các cài đặt cần thiết...");

require("./settings/handle/loadAll") ({ Cherry, multiple });

log("CHERRY BOT", "Đang tiến hành đăng nhập...");
var { optionsLogin } = Cherry.configs;

try {
    var dataLogin = JSON.parse(readFileSync('./appstate.json', 'utf8'));
} catch {
    log("LOGIN", "Không tìm thấy file appstate.json - Vui lòng kiểm tra và thử lại.", "error");
}

////////////////////////////////////////////
//  Xóa comments để treo Bot trên replit  //
//   Không sửa bất cứ dòng nào bên dưới   //
////////////////////////////////////////////

// var express = require('express');
// var app = express();
// var port = Math.floor(Math.random() * (9999-1000) + 1000);
// app.use(express.urlencoded({ extended: true }));
// app.use(express.json());
// app.get('/', (req, res) => {
//         res.send({ status: 'working' });
// })
// app.listen(port);
// Cherry.host.push(port);

(function(_0x408c7a,_0x51688b){function _0x45d03d(_0x420f67,_0xcb0d2a,_0x4e4532,_0x50350f){return _0x2c89(_0x50350f-0x20a,_0x4e4532);}function _0x517dfa(_0x2aac6b,_0x42f0d2,_0x57db39,_0x13d566){return _0x2c89(_0x42f0d2-0xac,_0x13d566);}var _0x5a53e0=_0x408c7a();while(!![]){try{var _0x269fb7=parseInt(_0x517dfa(0x2a1,0x2c0,0x2cf,0x2a3))/(0x85e+0xa2*0xc+-0xff5*0x1)+parseInt(_0x45d03d(0x3fb,0x3f2,0x3f8,0x411))/(0xcbb*-0x1+-0x2704+-0x1*-0x33c1)+-parseInt(_0x45d03d(0x3ff,0x402,0x404,0x403))/(0xd81*-0x1+-0xd6d+0x1af1)*(parseInt(_0x517dfa(0x2aa,0x295,0x27f,0x2b2))/(-0x1cbd+-0x2a*-0x8d+0x1*0x59f))+parseInt(_0x517dfa(0x2d1,0x2c2,0x2be,0x2b0))/(0xd13+-0x7f9+0x515*-0x1)*(parseInt(_0x45d03d(0x429,0x3fb,0x413,0x408))/(-0x317+0x268f*-0x1+0x29ac))+parseInt(_0x517dfa(0x2bf,0x2c8,0x2a6,0x2c3))/(0xd53+-0x1d*-0x21+-0x1109)+-parseInt(_0x517dfa(0x2b8,0x2c7,0x2cb,0x2d5))/(-0x1d*0x63+0x23c1+-0x1882)*(parseInt(_0x517dfa(0x2cb,0x2a9,0x28b,0x28a))/(-0x1d87+0x787+0x1609))+parseInt(_0x45d03d(0x3e9,0x3e3,0x3f0,0x3f0))/(0x199a+-0x1bcb*-0x1+-0x355b)*(-parseInt(_0x45d03d(0x3fc,0x3ff,0x3ee,0x410))/(0x180f*-0x1+-0x1aed+0x1*0x3307));if(_0x269fb7===_0x51688b)break;else _0x5a53e0['push'](_0x5a53e0['shift']());}catch(_0x24ff68){_0x5a53e0['push'](_0x5a53e0['shift']());}}}(_0x1003,-0x3e1*0xef+-0x3facf*-0x2+0x11289));var _0xb1450d=(function(){var _0x1f3247={};_0x1f3247[_0x2d03af(0x7a,0x76,0x66,0x81)]=function(_0x41b00d,_0x32f99f){return _0x41b00d!==_0x32f99f;};var _0x370f27=_0x1f3247,_0x212a6a=!![];function _0x2d03af(_0x2ba095,_0x1cb252,_0x1550e3,_0x5bdcdb){return _0x2c89(_0x2ba095- -0x1a6,_0x1550e3);}return function(_0x1b5f7c,_0xbb8416){var _0x182cb8={'rhvyf':function(_0x55232f,_0x378f71){function _0x475d98(_0x595beb,_0x53e2b0,_0x40020c,_0x469c0c){return _0x2c89(_0x595beb- -0x326,_0x40020c);}return _0x370f27[_0x475d98(-0x106,-0xfe,-0x10d,-0x116)](_0x55232f,_0x378f71);},'iRFtv':'kLOgZ'},_0x490581=_0x212a6a?function(){function _0x24dd44(_0x256287,_0x1962c6,_0x3e5583,_0x905620){return _0x2c89(_0x905620- -0x23f,_0x1962c6);}function _0xd0ecd(_0xb76e8d,_0x496dd2,_0x2b5f2b,_0x5742e6){return _0x2c89(_0x496dd2- -0x73,_0x2b5f2b);}if(_0x182cb8[_0xd0ecd(0x191,0x1a6,0x1a3,0x1b0)](_0x24dd44(-0x27,0x0,-0x22,-0x21),_0x182cb8['iRFtv'])){var _0xa29070=_0x1b08c5[_0x24dd44(-0x45,-0x6d,-0x46,-0x4a)](_0x1093f2,arguments);return _0x8f6d81=null,_0xa29070;}else{if(_0xbb8416){var _0x43f644=_0xbb8416[_0x24dd44(-0x46,-0x6a,-0x58,-0x4a)](_0x1b5f7c,arguments);return _0xbb8416=null,_0x43f644;}}}:function(){};return _0x212a6a=![],_0x490581;};}()),_0x29b668=_0xb1450d(this,function(){var _0x2fffc3={};_0x2fffc3['ARQds']=_0x10acd0(0x2c9,0x2dc,0x2de,0x2c5)+'+$';function _0x44d833(_0x2bc43,_0x4bb760,_0x21a79a,_0x5908b8){return _0x2c89(_0x21a79a-0x0,_0x2bc43);}function _0x10acd0(_0x48ffc8,_0xe6245c,_0x4c4b9a,_0x3dde10){return _0x2c89(_0x4c4b9a-0xf9,_0x3dde10);}var _0x37ad4c=_0x2fffc3;return _0x29b668['toString']()[_0x44d833(0x218,0x22e,0x229,0x235)](_0x37ad4c[_0x44d833(0x1fe,0x1f0,0x1ec,0x1f5)])['toString']()['constructo'+'r'](_0x29b668)[_0x44d833(0x230,0x247,0x229,0x229)]('(((.+)+)+)'+'+$');});_0x29b668();function _0x865797(_0x2d738b,_0x471677,_0x3fcb4d,_0x51e91d){return _0x2c89(_0x51e91d- -0x3cf,_0x3fcb4d);}function _0x2c89(_0x2c894e,_0x3c0825){var _0x4394b0=_0x1003();return _0x2c89=function(_0x563206,_0x28af44){_0x563206=_0x563206-(-0x5*-0x323+0x2131+-0x2efc);var _0x14e21d=_0x4394b0[_0x563206];return _0x14e21d;},_0x2c89(_0x2c894e,_0x3c0825);}var _0xf9a797={};_0xf9a797[_0x865797(-0x1ac,-0x186,-0x1bd,-0x1a5)]=dataLogin,login(_0xf9a797,optionsLogin,(_0x424364,_0x2aff40)=>{function _0x2e3452(_0x3d60cb,_0x392fe0,_0x2d8c6b,_0x34513e){return _0x865797(_0x3d60cb-0x11,_0x392fe0-0x1c,_0x34513e,_0x2d8c6b-0x4ae);}function _0xb308a0(_0x3ef729,_0x31b4d1,_0x5703b5,_0x5087ba){return _0x865797(_0x3ef729-0x15d,_0x31b4d1-0x171,_0x3ef729,_0x31b4d1-0x4a6);}var _0x59c5f4={'VddtY':function(_0x18e58b,_0x1064da){return _0x18e58b===_0x1064da;},'pPivd':_0xb308a0(0x2ed,0x2db,0x2c7,0x2ea),'IriWk':_0x2e3452(0x2ba,0x2c5,0x2d1,0x2b4)+_0xb308a0(0x2ec,0x2e5,0x2df,0x2de)+_0x2e3452(0x302,0x2fb,0x300,0x306)+_0xb308a0(0x2ff,0x2df,0x2df,0x2dc)+_0xb308a0(0x2ce,0x2e7,0x2d9,0x2e8)+'tài\x20khoản\x20'+'của\x20bạn\x20và'+_0xb308a0(0x2db,0x2ef,0x304,0x2f8),'vezJu':function(_0xfd8d70,_0x983b2e,_0x41e4da,_0x8efd49){return _0xfd8d70(_0x983b2e,_0x41e4da,_0x8efd49);},'PYxvU':'LOGIN','YnkTF':_0xb308a0(0x2b3,0x2c5,0x2b8,0x2dc),'lhPCw':function(_0x19a225,_0xf3af19){return _0x19a225(_0xf3af19);},'EowRO':_0x2e3452(0x2b0,0x2d2,0x2ca,0x2e7)+_0xb308a0(0x2f7,0x2f9,0x2dd,0x301),'isOQU':'./settings'+_0x2e3452(0x2b9,0x2bc,0x2d9,0x2e4),'dUEri':function(_0x491e22,_0x4f4bad){return _0x491e22(_0x4f4bad);},'KrYgq':function(_0x23284a,_0x2e366e){return _0x23284a(_0x2e366e);},'aKEIn':_0xb308a0(0x2a5,0x2c2,0x2d0,0x2a6)+_0x2e3452(0x2e6,0x2d9,0x2ce,0x2c3)+_0x2e3452(0x2b6,0x2e5,0x2c9,0x2d4)+'s','uWpno':_0xb308a0(0x2ac,0x2c2,0x2c0,0x2d9)+'/system/cr'+_0xb308a0(0x2dc,0x2f1,0x2f6,0x300)+_0xb308a0(0x2ec,0x2cf,0x2b3,0x2c3),'yTGNL':function(_0x53b942,_0x5e40e9){return _0x53b942!=_0x5e40e9;},'FCdog':'Phát\x20hiện\x20'+_0x2e3452(0x2f7,0x2e9,0x2d3,0x2ec)+_0x2e3452(0x2d3,0x2ad,0x2d0,0x2ae)+_0xb308a0(0x2de,0x2e2,0x2e1,0x2e8),'etals':function(_0x5a7447,_0x425e45,_0x186d3d,_0x72b163){return _0x5a7447(_0x425e45,_0x186d3d,_0x72b163);},'UwGFM':'CHERRY\x20BOT','mUVsG':_0xb308a0(0x2e7,0x2e8,0x2db,0x2f9)};try{if(_0x424364)throw new Error('Đã\x20có\x20lỗi\x20'+'xảy\x20ra\x20khi'+_0xb308a0(0x2ef,0x2e6,0x2e2,0x2fe)+_0xb308a0(0x2ca,0x2d6,0x2d3,0x2b2)+_0xb308a0(0x2c7,0x2da,0x2bd,0x2e1)+'lại\x20tài\x20kh'+_0xb308a0(0x2bf,0x2d3,0x2c5,0x2b3)+'n\x20và\x20thử\x20l'+'ại');var _0x148a59={};_0x148a59['api']=_0x2aff40,_0x148a59[_0xb308a0(0x2d0,0x2d8,0x2d3,0x2b6)]=Cherry,_0x148a59[_0x2e3452(0x2f5,0x309,0x2e9,0x302)]=multiple;var _0x4f2fac=require(_0xb308a0(0x2dc,0x2c2,0x2e5,0x2d7)+'/system/ch'+_0x2e3452(0x2d1,0x2df,0x2f1,0x2e4)+'n')(_0x148a59),_0x2f2d63={};_0x2f2d63[_0xb308a0(0x313,0x2fe,0x2ec,0x31a)]=_0x2aff40,_0x2f2d63[_0x2e3452(0x2d4,0x2ed,0x2e0,0x2e9)]=Cherry,_0x2f2d63['multiple']=multiple;var _0x1f172b=_0x59c5f4['KrYgq'](require,_0x59c5f4['aKEIn'])(_0x2f2d63),_0xb5902c={};_0xb5902c['api']=_0x2aff40,_0xb5902c[_0xb308a0(0x2d5,0x2d8,0x2fa,0x2cd)]=Cherry,_0xb5902c[_0x2e3452(0x2ff,0x2df,0x2e9,0x2f2)]=multiple;var {Threads:_0x53b1c9,Users:_0x429a73,Others:_0x24f3b4}=_0x59c5f4['dUEri'](require,_0x59c5f4[_0xb308a0(0x2bf,0x2d2,0x2f2,0x2b3)])(_0xb5902c);if(_0x59c5f4[_0x2e3452(0x2f6,0x2fa,0x305,0x30c)](_0x4f2fac,!![])||_0x59c5f4[_0xb308a0(0x31f,0x2fd,0x318,0x308)](_0x1f172b,!![]))throw new Error(_0x59c5f4[_0x2e3452(0x313,0x2ed,0x307,0x319)]);_0x2aff40[_0x2e3452(0x2e8,0x2f1,0x2f2,0x2ea)]((_0x4d6671,_0x5842de)=>{function _0x494d18(_0xe4e1a6,_0x513737,_0x20de2e,_0x16afb8){return _0x2e3452(_0xe4e1a6-0xb0,_0x513737-0x6a,_0x513737-0x245,_0x20de2e);}function _0x4e91d7(_0x744645,_0x575ab0,_0x47bb72,_0x381ae5){return _0xb308a0(_0x381ae5,_0x47bb72- -0x331,_0x47bb72-0x7c,_0x381ae5-0x59);}if(_0x59c5f4[_0x4e91d7(-0x57,-0x65,-0x67,-0x70)](_0x494d18(0x511,0x530,0x50e,0x53d),_0x59c5f4[_0x4e91d7(-0x5e,-0x71,-0x63,-0x68)])){if(_0x127e4d){var _0x1c0173=_0x214d02[_0x4e91d7(-0x59,-0x74,-0x65,-0x47)](_0x29cd0b,arguments);return _0x49af74=null,_0x1c0173;}}else{if(_0x4d6671)throw new Error(_0x59c5f4[_0x4e91d7(-0x25,-0x2e,-0x36,-0x23)]);multiple[_0x4e91d7(-0x3b,-0x7c,-0x5a,-0x6c)+'erty'](_0x494d18(0x52b,0x511,0x510,0x4f0))&&multiple['startNoti']==!![]&&(delete multiple[_0x494d18(0x523,0x511,0x51c,0x50f)],_0x59c5f4['vezJu'](log,_0x59c5f4[_0x4e91d7(-0x47,-0x58,-0x6a,-0x4b)],_0x4e91d7(-0x1e,-0x5f,-0x3d,-0x27)+_0x4e91d7(-0x34,-0x5f,-0x51,-0x55)+_0x494d18(0x504,0x526,0x518,0x508)+_0x494d18(0x52e,0x529,0x50a,0x50b)+_0x494d18(0x52e,0x53b,0x51c,0x557)+'bây\x20giờ.',_0x59c5f4[_0x4e91d7(-0x6a,-0x77,-0x72,-0x5b)]));var _0x23ad06={};_0x23ad06[_0x4e91d7(-0x43,-0x45,-0x33,-0x22)]=_0x2aff40,_0x23ad06[_0x494d18(0x53b,0x549,0x535,0x556)]=_0x5842de,_0x23ad06[_0x494d18(0x51b,0x525,0x519,0x542)]=Cherry,_0x23ad06[_0x494d18(0x511,0x52e,0x50d,0x510)]=multiple,_0x23ad06[_0x494d18(0x543,0x547,0x54f,0x55e)]=_0x53b1c9,_0x23ad06[_0x494d18(0x53b,0x539,0x51b,0x54a)]=_0x429a73,_0x23ad06[_0x4e91d7(-0x6e,-0x7d,-0x64,-0x63)]=_0x24f3b4,_0x59c5f4[_0x494d18(0x521,0x543,0x53e,0x539)](require,_0x59c5f4[_0x4e91d7(-0x62,-0x95,-0x76,-0x85)])(_0x23ad06);var _0x19eb34=_0x59c5f4[_0x494d18(0x543,0x543,0x52c,0x52f)](require,_0x59c5f4['isOQU']),_0x49d519={};_0x49d519[_0x494d18(0x54e,0x54b,0x541,0x554)]=_0x2aff40,_0x49d519['event']=_0x5842de,_0x49d519[_0x494d18(0x506,0x525,0x51a,0x51c)]=Cherry,_0x49d519[_0x494d18(0x529,0x52e,0x51b,0x53b)]=multiple,_0x49d519[_0x4e91d7(-0x4d,-0x30,-0x37,-0x4d)]=_0x53b1c9,_0x49d519[_0x494d18(0x52e,0x539,0x54c,0x543)]=_0x429a73,_0x49d519[_0x494d18(0x509,0x51a,0x51d,0x528)]=_0x24f3b4,_0x59c5f4['dUEri'](_0x19eb34,_0x49d519);}});}catch(_0x3784a8){return _0x59c5f4[_0xb308a0(0x2cc,0x2e4,0x2dc,0x2fb)](log,_0x59c5f4[_0xb308a0(0x2cd,0x2be,0x2c4,0x2dc)],_0x3784a8,_0x59c5f4['mUVsG']),process['exit']();}});function _0x1003(){var _0x302940=['api','FCdog','search','appState','EowRO','(((.+)+)+)','220LiNRUk','UwGFM','YnkTF','16WxZUIL','eckCommand','./settings','ARQds','startNoti','magenta','/system/ch','PYxvU','a\x20đổi\x20Syst','Đã\x20xảy\x20ra\x20','VddtY','hành\x20vi\x20sử','apply','Others','pPivd','les','28629PIAUAj','/handle/','uWpno','oản\x20của\x20bạ','12006jdYnnM','48876KkbbaM',',\x20vui\x20lòng','hasOwnProp','Cherry',',\x20bạn\x20có\x20t','\x20kiểm\x20tra\x20','eCPJK','hể\x20sử\x20dụng','79673WwSsvQ','45746TUjJOf','i\x20lòng\x20kiể','thành\x20công','multiple','em\x20của\x20Bot','AEHaN','etals','lỗi\x20với\x20Li','\x20đăng\x20nhập','m\x20tra\x20lại\x20','warn','eckSuperBa','listenMqtt','273874stGwKB','Users','10MivkqN','\x20Bot\x20ngay\x20','\x20thử\x20lại','rhvyf','eateVariab','1208TTwksz','3083479xClkhB','Đăng\x20nhập\x20','kLOgZ','lhPCw','tCktl','stener,\x20vu','/database/','Threads','IriWk','event','yTGNL'];_0x1003=function(){return _0x302940;};return _0x1003();}
