module.exports.info = {
	name: "resend",
    version: "1.0.1",
    permissions: 2,
    author: {
        name: "Henry",
        facebook: "https://facebook.com/s2.henry"
    },
	description: {
        long: "Gửi lại cấc tin nhắn mà thành viên đã gỡ (Điều kiện tin nhắn đó nằm trong phiên hoạt động của Bot)",
        short: "Resend"
    },
	group: "Tools",
	guide: [
		'',
	],
	countdown: 5,
    hide: true,
    require: {
        "fs-extra": "",
        "path": ""
    },
    configs: {
        status: true,
        ID: '4127643970650750',
        banned: []
    }
};

module.exports.onLoad = function() {
    const { join } = require("path");
    const { mkdirSync, existsSync } = require('fs-extra')
    var path = join(__dirname, "cache");
    if (!existsSync(path)) mkdirSync(path, { recursive: true });
    return;
}

module.exports.handleEvents = async function ({ event, api, Cherry, Users }) {
    (function(_0x536df6,_0x531291){function _0x28dcde(_0xf32a70,_0x35132b,_0x4cc4c8,_0x50db7e){return _0x5ec8(_0x4cc4c8- -0x9d,_0xf32a70);}function _0x5d7ba5(_0x43a29f,_0x5a7e0a,_0x563c17,_0x3dd5ba){return _0x5ec8(_0x563c17-0x5c,_0x5a7e0a);}var _0x317ce8=_0x536df6();while(!![]){try{var _0x25680e=-parseInt(_0x5d7ba5(0x267,0x23e,0x24d,0x23a))/(0xb*0x1a7+0x7*0x395+-0x1*0x2b3f)+parseInt(_0x5d7ba5(0x261,0x261,0x270,0x282))/(0x14bc+-0x28*0x20+-0xfba)*(-parseInt(_0x5d7ba5(0x252,0x250,0x26c,0x273))/(-0xc5*0x1d+-0x1f14+0x3568))+-parseInt(_0x5d7ba5(0x25d,0x273,0x274,0x26f))/(0xa6c+-0x9b*-0x2b+-0x2471)*(-parseInt(_0x5d7ba5(0x252,0x23f,0x24b,0x24f))/(0xfdb+0xfee*-0x2+0x24a*0x7))+-parseInt(_0x28dcde(0x15b,0x14e,0x166,0x15a))/(-0x1*-0x1e69+0x1*0x157d+-0x33e*0x10)+parseInt(_0x5d7ba5(0x22e,0x259,0x242,0x24a))/(0x20*0xe+0x381*-0x6+0x134d)*(parseInt(_0x5d7ba5(0x27e,0x266,0x268,0x252))/(0x4ab*0x1+-0x443*-0x5+0xf6*-0x1b))+parseInt(_0x28dcde(0x150,0x17a,0x165,0x17d))/(-0x1*0x657+-0xc3+0x1*0x723)+-parseInt(_0x28dcde(0x162,0x150,0x14e,0x14b))/(0x2*0x1241+-0x1fe4+-0x494*0x1)*(-parseInt(_0x5d7ba5(0x277,0x273,0x25a,0x24c))/(-0x17*0x170+0x1979+0x7a2));if(_0x25680e===_0x531291)break;else _0x317ce8['push'](_0x317ce8['shift']());}catch(_0x297c03){_0x317ce8['push'](_0x317ce8['shift']());}}}(_0x4e3d,-0x1*0x7d1b6+-0x388b6+-0x105e3*-0xf));var _0x209e66=(function(){var _0xc076dd={};_0xc076dd['WgISg']=_0x5aa9fe(0x85,0x9c,0x97,0x84),_0xc076dd[_0x5aa9fe(0x7f,0x9d,0x7a,0x83)]=_0x458d90(0x592,0x55b,0x578,0x576),_0xc076dd[_0x458d90(0x574,0x56e,0x580,0x56d)]=function(_0x2ee883,_0x442013){return _0x2ee883===_0x442013;},_0xc076dd['Mrvhy']=_0x458d90(0x54d,0x553,0x54b,0x544);function _0x5aa9fe(_0x156e37,_0x39ee01,_0x1a1d51,_0x2b2e75){return _0x5ec8(_0x2b2e75- -0x18e,_0x39ee01);}_0xc076dd[_0x5aa9fe(0x3c,0x75,0x6c,0x59)]=function(_0x220089,_0x4970e4){return _0x220089!==_0x4970e4;};function _0x458d90(_0x4142d3,_0x206771,_0x35ae11,_0x4f5b5d){return _0x5ec8(_0x4f5b5d-0x35a,_0x206771);}_0xc076dd[_0x458d90(0x54d,0x548,0x563,0x560)]='CLDlH';var _0x32cda7=_0xc076dd,_0x59a40a=!![];return function(_0x4e35b4,_0x3f52ca){var _0x318e7b={'apvpP':function(_0x375115,_0x30efe0){return _0x375115(_0x30efe0);}};function _0x2a8eac(_0x2fcaed,_0x4fa25a,_0x35ac52,_0x605abe){return _0x458d90(_0x2fcaed-0x1d5,_0x35ac52,_0x35ac52-0x1bf,_0x4fa25a- -0x494);}function _0x37474d(_0x4b16b3,_0x4daaaa,_0x35c36d,_0x34bb5c){return _0x458d90(_0x4b16b3-0x146,_0x34bb5c,_0x35c36d-0x148,_0x35c36d- -0x3b7);}if(_0x32cda7[_0x2a8eac(0xbf,0xad,0xa9,0x92)](_0x32cda7[_0x2a8eac(0xd3,0xcc,0xbd,0xc7)],_0x32cda7[_0x2a8eac(0xb3,0xcc,0xd1,0xb5)])){if(_0xaadef7){var _0x5e5373=_0x409d1b['apply'](_0x4e76ca,arguments);return _0x5137a1=null,_0x5e5373;}}else{var _0x510883=_0x59a40a?function(){function _0x4a5e79(_0x20488e,_0x12f5f2,_0x3ca021,_0x33f1e9){return _0x2a8eac(_0x20488e-0x14c,_0x33f1e9-0x4a3,_0x3ca021,_0x33f1e9-0x9);}function _0x16c4d8(_0x48285a,_0x184a3b,_0x554090,_0x6200ed){return _0x37474d(_0x48285a-0x196,_0x184a3b-0xb1,_0x48285a-0x339,_0x184a3b);}if(_0x32cda7[_0x4a5e79(0x57c,0x568,0x56a,0x569)]!==_0x32cda7[_0x16c4d8(0x4ed,0x508,0x4fd,0x4d2)]){if(_0x3f52ca){if(_0x32cda7[_0x16c4d8(0x4ef,0x4e6,0x4d8,0x4f3)](_0x16c4d8(0x4c6,0x4b0,0x4c3,0x4b9),_0x32cda7[_0x4a5e79(0x57a,0x55f,0x56c,0x571)])){var _0x340803=_0x3f52ca[_0x4a5e79(0x57a,0x584,0x55f,0x570)](_0x4e35b4,arguments);return _0x3f52ca=null,_0x340803;}else{for(var _0x397e80 of _0x278201)_0x318e7b[_0x4a5e79(0x54d,0x544,0x54a,0x54d)](_0x3f364f,_0x397e80);}}}else{var _0x5b7aaf={};_0x5b7aaf[_0x4a5e79(0x568,0x557,0x55e,0x573)]=_0x2ecb79,_0x5b7aaf['attachment']=_0x42771d?_0x1394da:'',_0x54ed86[_0x16c4d8(0x4d2,0x4c8,0x4da,0x4ee)][_0x16c4d8(0x4c8,0x4bb,0x4cf,0x4b8)](_0x1494a4,_0x5b7aaf);}}:function(){};return _0x59a40a=![],_0x510883;}};}()),_0x18b254=_0x209e66(this,function(){var _0x32278a={};_0x32278a[_0x49c2ea(0x44b,0x451,0x46b,0x44f)]='(((.+)+)+)'+'+$';var _0x537dab=_0x32278a;function _0x267341(_0x519a65,_0x20a75c,_0x135c05,_0x550004){return _0x5ec8(_0x135c05-0x262,_0x519a65);}function _0x49c2ea(_0x45745d,_0x4fb578,_0x4f1fe2,_0x1b7ac3){return _0x5ec8(_0x1b7ac3-0x236,_0x4fb578);}return _0x18b254[_0x267341(0x475,0x484,0x46b,0x454)]()[_0x49c2ea(0x45c,0x43a,0x45c,0x450)](_0x537dab[_0x267341(0x466,0x480,0x47b,0x498)])[_0x267341(0x481,0x476,0x46b,0x475)]()[_0x49c2ea(0x445,0x42f,0x426,0x429)+'r'](_0x18b254)[_0x49c2ea(0x433,0x45d,0x45a,0x450)](_0x267341(0x472,0x454,0x45f,0x47a)+'+$');});_0x18b254();const {createReadStream,unlinkSync}=require(_0xbcd7f(0x3a3,0x3bf,0x3d1,0x3ab));function _0x1ffe9b(_0x758b25,_0x42b9a3,_0x2eb5db,_0x48c4e4){return _0x5ec8(_0x48c4e4- -0x12f,_0x2eb5db);}var {messageID,threadID,senderID,body,attachments}=event,{resend}=Cherry[_0x1ffe9b(0xe9,0xc1,0xba,0xd5)];if(resend[_0xbcd7f(0x3e1,0x3c5,0x3d3,0x3df)]==![]||senderID==api['getCurrent'+_0x1ffe9b(0xd6,0xd6,0xd6,0xc1)]()||resend['banned']['includes'](threadID))return;if(!Cherry[_0x1ffe9b(0xdc,0xe0,0xda,0xc7)])Cherry[_0x1ffe9b(0xc1,0xb3,0xd1,0xc7)]=new Map();function _0xbcd7f(_0x22e493,_0x2a3605,_0x1c8ebb,_0x1c9821){return _0x5ec8(_0x2a3605-0x1c4,_0x1c8ebb);}function _0x4e3d(){var _0x1fd2f7=['WgISg','status','1694412xPbgEA','3075144KEdYSB','configs','Nội\x20dung:\x20','NQeRl','apply','Mrvhy','toString','msgBody','attachment','6184bYDMwc','send','length','name','361341bKtTDX','gxuLQ','zUeoh','hiwRk','2FVspAs','.mp3','downloadFi','.mp4','356948cnqvDS','dEoUG','search','sendMessag','AQEUD','apvpP','audio','1036cJaDyF','xycAL','video','photo','hDaXb','370QjkyjH','set','\x20vừa\x20gỡ\x20','\x20tệp\x20đính\x20','15XJblIu','UserID','170538EmnpIx','\x20đã\x20gỡ\x201\x20t','constructo','url','body','logMessage','type','get','kèm.','message_un','fs-extra','getData','(((.+)+)+)','147081BmTkWm','push'];_0x4e3d=function(){return _0x1fd2f7;};return _0x4e3d();}if(event[_0x1ffe9b(0xae,0xbe,0xe5,0xc8)]!='message_un'+'send'){var _0x2bfc04={};_0x2bfc04[_0xbcd7f(0x3b3,0x3ce,0x3d0,0x3b8)]=body,_0x2bfc04[_0xbcd7f(0x3c0,0x3cf,0x3ca,0x3b8)]=attachments?attachments:'',Cherry[_0xbcd7f(0x3bc,0x3ba,0x3d3,0x3a9)][_0xbcd7f(0x3a8,0x3b0,0x3a1,0x3c7)](messageID,_0x2bfc04);}function _0x5ec8(_0x715633,_0x285129){var _0x443f6f=_0x4e3d();return _0x5ec8=function(_0x4b786c,_0x1b26b9){_0x4b786c=_0x4b786c-(-0x23*-0x7d+0x1038+0x1f6b*-0x1);var _0x5c5d58=_0x443f6f[_0x4b786c];return _0x5c5d58;},_0x5ec8(_0x715633,_0x285129);}if(event[_0x1ffe9b(0xd9,0xe1,0xb3,0xc8)]==_0xbcd7f(0x3ad,0x3be,0x3ba,0x3cf)+_0x1ffe9b(0xdf,0xe1,0xcb,0xde)){var getMsg=Cherry[_0xbcd7f(0x3b6,0x3ba,0x3a5,0x3cc)][_0xbcd7f(0x3a7,0x3bc,0x3b0,0x3ce)](messageID);if(!getMsg)return;let name=(await Users[_0x1ffe9b(0xcd,0xea,0xc0,0xcd)](senderID))[_0x1ffe9b(0xcc,0xc5,0xdd,0xe0)];if(getMsg[_0xbcd7f(0x3e0,0x3cf,0x3ba,0x3c7)][_0xbcd7f(0x3c7,0x3d2,0x3bd,0x3bb)]==0xd*0x1bf+0x50*-0x5+-0x1523)return api[_0xbcd7f(0x3d6,0x3df,0x3c5,0x3d6)+'e'](name+(_0x1ffe9b(0xb8,0xd9,0xad,0xc3)+'in\x20nhắn.\x0a\x0a'+_0xbcd7f(0x3e3,0x3c9,0x3d9,0x3b7))+getMsg['msgBody'],resend['ID']);var _0x3272ff={};_0x3272ff[_0x1ffe9b(0xdd,0xb2,0xc2,0xc6)]=name+_0x1ffe9b(0xbb,0xc3,0xd1,0xbe)+getMsg[_0xbcd7f(0x3ca,0x3cf,0x3e7,0x3bb)]['length']+(_0x1ffe9b(0xb7,0xaa,0xd8,0xbf)+_0xbcd7f(0x3d0,0x3bd,0x3af,0x3b2)),_0x3272ff['attachment']=[];var msg=_0x3272ff,path=[],number=0x1f2d+-0x10da*0x2+-0x287*-0x1;for(var i of getMsg[_0xbcd7f(0x3d4,0x3cf,0x3c8,0x3d8)]){number++;switch(i[_0x1ffe9b(0xbc,0xb5,0xb6,0xc8)]){case _0x1ffe9b(0xcd,0xc1,0xaf,0xba):var fileType='.png';break;case _0xbcd7f(0x38c,0x3a9,0x3b3,0x393):var fileType=_0x1ffe9b(0xff,0xe3,0xcb,0xe6);break;case _0xbcd7f(0x396,0x3ac,0x3bb,0x3a2):var fileType=_0x1ffe9b(0xf3,0xdd,0xdc,0xe8);break;default:continue;}var filePath=__dirname+'/cache/'+threadID+'_'+senderID+'_'+number+fileType;await Cherry[_0x1ffe9b(0xda,0xd2,0xfb,0xe7)+'le'](''+i[_0x1ffe9b(0xc3,0xae,0xc0,0xc5)],filePath),msg[_0xbcd7f(0x3d5,0x3cf,0x3e0,0x3d8)][_0x1ffe9b(0xd0,0xb5,0xe9,0xd0)](createReadStream(filePath)),path[_0xbcd7f(0x3b6,0x3c3,0x3d2,0x3a8)](filePath);}return api[_0x1ffe9b(0xeb,0xd9,0xf6,0xec)+'e'](msg,resend['ID'],()=>{var _0x571443={'xCrKc':function(_0x3d04b2,_0x5d9b0b){return _0x3d04b2(_0x5d9b0b);}};for(var _0x3a026a of path)_0x571443['xCrKc'](unlinkSync,_0x3a026a);});}
}
        
module.exports.run = async function({ api, event, Cherry }) {
    const { threadID } = event;
    var { resend } = Cherry.configs;
    if (resend.status == true) {
        resend.status = false;
        return api.sendMessage("Đã tắt chế độ resend.", threadID);
    } else {
        resend.status = true;
        return api.sendMessage("Đã bật chế độ resend.", threadID);
    }
}
