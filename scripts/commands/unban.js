module.exports.info = {
	name: "unban",
	version: "1.0.2",
	permissions: 2,
	author: {
		name: "Henry",
		facebook: "https://facebook.com/s2.henry"
	},
	description: {
        long: "Tha tội cho người đã bị ban trước đó",
        short: "Gỡ lệnh ban"
    },
	group: "Dành Cho Quản Lí",
	guide: [
		'[tag]',
	],
	countdown: 5
};

module.exports.handleReactionMessage = async function({ api, event, Users, Reaction, Cherry, multiple }) {
	function _0x5c42(){var _0x1dd853=['Bạn\x20không\x20','constructo','463060VQjpUK','configs','superBan','userID','952696WmpbHb','larSV','allUsersBa','delete','age','toString','sendMessag','thể\x20gỡ\x20Sup','3sgMDaj','\x20cấm\x20dùng\x20','uperBan','name','setData','1355808IerNJs','Cherry\x20-\x20S','\x20bị\x20superB','Người\x20dùng','Đã\x20gỡ\x20lệnh','banned','243kVvJlj','has','\x20unban!','1407119CcNaZX','search','ản\x20Lý\x20Bot\x20','(((.+)+)+)','nned','author','unbanUser','86596UbalGP','Bot\x20cho\x20','304079pzZOsU','356296sCEmWp','type','er\x20Ban\x20của','mới\x20có\x20thể'];_0x5c42=function(){return _0x1dd853;};return _0x5c42();}(function(_0x116a33,_0x2c8239){var _0x3bc8e2=_0x116a33();function _0x40316d(_0x2faadd,_0x11ff4c,_0x240068,_0x3c1caf){return _0x247d(_0x11ff4c- -0x2e5,_0x3c1caf);}function _0x2a0378(_0x8ae47c,_0x4f3c4f,_0x2f77d1,_0x474ad7){return _0x247d(_0x2f77d1- -0x1c3,_0x8ae47c);}while(!![]){try{var _0x3161e0=-parseInt(_0x40316d(-0x182,-0x197,-0x187,-0x199))/(0x4f1+-0x14fe+0x100e)+parseInt(_0x40316d(-0x19e,-0x199,-0x18e,-0x185))/(-0x7*0x34+0xcc8*0x1+-0xb5a)*(parseInt(_0x40316d(-0x19a,-0x1ae,-0x1a8,-0x1c0))/(0x238a+-0x1d11+-0x676))+-parseInt(_0x2a0378(-0x9f,-0x7f,-0x94,-0x7f))/(0x1f1*-0x9+0x19f3+-0x876)+-parseInt(_0x40316d(-0x1aa,-0x1ba,-0x1ba,-0x1b5))/(-0x74d+0x1*-0x1783+0x1ed5)+-parseInt(_0x40316d(-0x1b4,-0x1a9,-0x1ad,-0x19a))/(0x1cb7*-0x1+0x9*0x107+0x5*0x3e6)+-parseInt(_0x2a0378(-0x69,-0x6a,-0x7e,-0x6d))/(-0x16ba+-0xef1+0x19*0x182)+parseInt(_0x40316d(-0x18f,-0x196,-0x195,-0x19f))/(0x1*-0xb15+0x3d*0x91+-0x1770)*(parseInt(_0x2a0378(-0x8f,-0x8e,-0x81,-0x6e))/(0x1d2a*0x1+-0x130*-0xe+-0x2dc1));if(_0x3161e0===_0x2c8239)break;else _0x3bc8e2['push'](_0x3bc8e2['shift']());}catch(_0x1f8440){_0x3bc8e2['push'](_0x3bc8e2['shift']());}}}(_0x5c42,-0x321ff+0xc91f+0x1*0x5276b));function _0x247d(_0x1abf54,_0x3943c4){var _0x3115ab=_0x5c42();return _0x247d=function(_0x39dc1c,_0x4b527a){_0x39dc1c=_0x39dc1c-(0x9*-0x30b+-0xa4d+-0x1*-0x26d7);var _0x239039=_0x3115ab[_0x39dc1c];return _0x239039;},_0x247d(_0x1abf54,_0x3943c4);}var _0x21f3af=(function(){var _0x55544c=!![];return function(_0x240cb0,_0x31494b){var _0x21c350=_0x55544c?function(){if(_0x31494b){var _0x2620e4=_0x31494b['apply'](_0x240cb0,arguments);return _0x31494b=null,_0x2620e4;}}:function(){};return _0x55544c=![],_0x21c350;};}());function _0x598fc2(_0x4b9fab,_0x160740,_0x18a4ed,_0x1b9802){return _0x247d(_0x18a4ed- -0x2d,_0x4b9fab);}var _0x3a8ed8=_0x21f3af(this,function(){function _0x2bc7a5(_0x54df96,_0x3bcf20,_0x5ccf2e,_0x5a3b42){return _0x247d(_0x5ccf2e-0xd4,_0x3bcf20);}var _0x1b725d={};_0x1b725d['larSV']=_0x2bc7a5(0x227,0x224,0x21c,0x20d)+'+$';var _0xac3c64=_0x1b725d;function _0x228cdb(_0x4a1861,_0x1edfca,_0x4c4725,_0x32b38d){return _0x247d(_0x4c4725- -0x3be,_0x1edfca);}return _0x3a8ed8[_0x228cdb(-0x29b,-0x291,-0x28a,-0x293)]()[_0x2bc7a5(0x219,0x207,0x21a,0x224)](_0xac3c64[_0x228cdb(-0x27d,-0x2a3,-0x28e,-0x29b)])[_0x228cdb(-0x28a,-0x282,-0x28a,-0x27b)]()[_0x2bc7a5(0x1ea,0x205,0x1fe,0x1f0)+'r'](_0x3a8ed8)[_0x228cdb(-0x287,-0x279,-0x278,-0x271)](_0xac3c64['larSV']);});function _0x575117(_0x10a3fb,_0x4c8538,_0x953c3e,_0x2e3d50){return _0x247d(_0x953c3e-0x3b8,_0x4c8538);}_0x3a8ed8();if(event[_0x575117(0x4d4,0x4f1,0x4e6,0x4f3)]!=Reaction[_0x575117(0x513,0x4fe,0x502,0x4fb)])return;api['unsendMess'+_0x598fc2(0x10b,0x10c,0x106,0xfd)](Reaction['messageID']);var {threadID,userID}=event,unbanInfo=await Users['getData'](Reaction['unbanUser']),{ADMIN}=Cherry[_0x575117(0x4f4,0x4e5,0x4e4,0x4dc)];if(unbanInfo['banned']['type']==_0x598fc2(0x107,0x11d,0x110,0x11c)+_0x598fc2(0xfb,0x102,0x10c,0xfb))return api['sendMessag'+'e'](_0x598fc2(0x10f,0x101,0xfc,0xfd)+_0x598fc2(0xfe,0x114,0x109,0x113)+_0x598fc2(0xe9,0xf4,0xfa,0x102)+'\x20Cherry',threadID);if(unbanInfo[_0x598fc2(0x121,0x115,0x114,0x116)][_0x575117(0x519,0x4f8,0x508,0x4f4)]==_0x598fc2(0xf6,0x111,0x100,0x108)){for(var ID of ADMIN){if(ID==userID){delete unbanInfo[_0x598fc2(0x107,0x100,0x114,0x10b)],await Users[_0x598fc2(0x10a,0x118,0x10e,0x107)](Reaction[_0x575117(0x4f1,0x50d,0x503,0x512)],unbanInfo);if(multiple[_0x575117(0x4e7,0x4e4,0x4e9,0x4f6)+_0x575117(0x508,0x513,0x501,0x50d)][_0x598fc2(0x110,0x11a,0x116,0x104)](unbanInfo['ID']))multiple[_0x598fc2(0x104,0x115,0x104,0x104)+_0x598fc2(0x114,0x119,0x11c,0x130)][_0x598fc2(0x107,0xf1,0x105,0xfb)](unbanInfo['ID']);return api[_0x575117(0x4fb,0x4de,0x4ed,0x4f1)+'e']('Đã\x20gỡ\x20lệnh'+_0x575117(0x4df,0x4f6,0x4f0,0x4dc)+'Bot\x20cho\x20'+unbanInfo[_0x598fc2(0x122,0x121,0x10d,0xff)]+'.',threadID);}}return api['sendMessag'+'e'](_0x575117(0x4f9,0x4f6,0x4f7,0x507)+'\x20'+unbanInfo[_0x598fc2(0xf8,0x11c,0x10d,0xf9)]+(_0x575117(0x4f7,0x50b,0x4f6,0x4ec)+'an,\x20chỉ\x20Qu'+_0x575117(0x4f2,0x505,0x4ff,0x4ed)+_0x598fc2(0xf4,0x10d,0xfb,0x103)+_0x598fc2(0x109,0x126,0x117,0x129)),threadID);}else{delete unbanInfo[_0x575117(0x50c,0x4e6,0x4f9,0x4e5)],await Users[_0x575117(0x4e5,0x4ff,0x4f3,0x4e0)](Reaction[_0x598fc2(0x129,0x123,0x11e,0x122)],unbanInfo);if(multiple['allUsersBa'+_0x575117(0x4f0,0x505,0x501,0x503)]['has'](unbanInfo['ID']))multiple['allUsersBa'+_0x575117(0x4fb,0x4fe,0x501,0x4fc)][_0x575117(0x4fa,0x4e4,0x4ea,0x4f6)](unbanInfo['ID']);return api[_0x598fc2(0xf6,0x119,0x108,0x100)+'e'](_0x598fc2(0x11a,0x113,0x113,0x104)+'\x20cấm\x20dùng\x20'+_0x575117(0x50f,0x4fa,0x505,0x512)+unbanInfo[_0x598fc2(0xf9,0x117,0x10d,0x105)]+'.',threadID);}
}

module.exports.run = async function({ api, event, multiple, Users }) {
    var { threadID, senderID, messageID } = event;
    var mention = Object.keys(event.mentions);
    if (mention.length == 0) return api.sendMessage("Bạn cần tag người muốn unban!", threadID, messageID);
    if (mention.length > 1) return api.sendMessage("Bạn chỉ có thể unban một người mỗi lần!", threadID, messageID);
    var unbannedInfo = await Users.getData(mention);
    if (!unbannedInfo) return api.sendMessage("Người dùng này không có trong Database.", threadID, messageID);
    if (unbannedInfo.banned.status == false) return api.sendMessage("Người dùng này chưa bị ban từ trước", threadID, messageID);
    
    return api.sendMessage(`Bạn có chắc muốn unban cho người dùng này?\n\nThả cảm xúc vào tin nhắn này để đồng ý.`, threadID, (error, info) => {
        if (error) console.log(error);
        multiple.handleReactionMessage.push({
            name: this.info.name,
            messageID: info.messageID,
            author: senderID,
            unbanUser: mention
        });
    }, messageID);
}
